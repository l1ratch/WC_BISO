# Контрольные вопросы и ответы, практика 1.

## 1. Что такое виртуализация? Какие типы виртуализации вы знаете?

**Виртуализация** — это технология создания виртуальной версии физического ресурса (сервер, ОС, сеть, диск), позволяющая запускать несколько изолированных сред на одном физическом оборудовании.

Типы:

* Полная виртуализация (Full virtualization) — VirtualBox, VMware
* Паравиртуализация — Xen
* Виртуализация на уровне ОС (контейнеризация) — Docker, LXC
* Аппаратная виртуализация — Intel VT-x, AMD-V

---

## 2. Что такое гипервизор?

**Гипервизор** — это программное обеспечение, управляющее виртуальными машинами и распределяющее ресурсы хоста.

Типы:

* Type 1 (bare metal) — VMware ESXi, Hyper-V
* Type 2 (hosted) — VirtualBox, VMware Workstation

---

## 3. Разница между виртуализацией и контейнеризацией

| Виртуализация                           | Контейнеризация               |
| --------------------------------------- | ----------------------------- |
| Виртуализируется аппаратное обеспечение | Используется ядро хостовой ОС |
| Каждая VM имеет свою ОС                 | Контейнеры используют одну ОС |
| Более ресурсоёмкая                      | Более лёгкая                  |
| Медленный запуск                        | Быстрый запуск                |

---

## 4. Архитектура Docker

Основные компоненты:

* Docker Engine — основной сервис
* Docker daemon (dockerd) — управляет контейнерами
* Docker CLI — интерфейс управления
* Docker images — образы
* Docker containers — контейнеры
* Docker registry — хранилище образов

---

## 5. Что такое образ и контейнер?

**Образ (Image)** — шаблон, содержащий приложение и зависимости.

**Контейнер (Container)** — запущенный экземпляр образа.

Разница:

* Образ — статический
* Контейнер — динамический

---

## 6. Наиболее важные команды Docker

```bash
docker build
docker run
docker ps
docker stop
docker start
docker pull
docker push
docker images
docker rm
docker exec
```

---

## 7. Что такое пространства имен (namespaces)?

Namespaces — механизм изоляции процессов.

Типы:

* pid — процессы
* net — сеть
* mount — файловая система
* ipc — IPC
* user — пользователи
* uts — hostname

---

## 8. Какие сети доступны по умолчанию?

* bridge — сеть по умолчанию
* host — использует сеть хоста
* none — без сети

---

## 9. Потеряются ли данные при остановке контейнера?

Нет, если контейнер не удалён.

Но данные внутри контейнера потеряются, если контейнер удалён.

Решение:

* volumes
* bind mounts

---

## 10. Разница между docker run и docker create

docker create

* создаёт контейнер
* не запускает

docker run

* создаёт и запускает контейнер

---

## 11. Что такое CMD и ENTRYPOINT

CMD — команда по умолчанию

ENTRYPOINT — основной исполняемый файл

Пример:

```dockerfile
CMD ["node", "app.js"]
```

---

## 12. Состояния контейнера Docker

* created
* running
* paused
* stopped
* exited
* restarting
* dead

---

## 13. Типы монтирования

* volume
* bind mount
* tmpfs

Пример:

```bash
-v /host:/container
```

---

## 14. Что такое Docker Trusted Registry

Приватный registry с безопасным хранением образов.

Функции:

* контроль доступа
* безопасность
* управление версиями

---

## 15. Какие уязвимости связаны с Docker

Основные:

* запуск от root
* устаревшие образы
* открытые порты
* утечка секретов
* escape из контейнера

---

## 16. Практики безопасности Docker

* использовать минимальные образы
* запускать не от root
* обновлять образы
* использовать .dockerignore
* ограничивать ресурсы
* использовать read-only filesystem

---

## 17. Инструменты сканирования безопасности

Основные:

* Trivy
* Docker Bench Security
* Docker Scout
* Clair
* Anchore

---

## 18. Механизмы изоляции Docker

* namespaces
* cgroups
* seccomp
* AppArmor
* SELinux

---

## 19. Инструменты мониторинга безопасности

* Docker Bench Security
* Falco
* Prometheus
* Grafana
* auditd

---

## 20. Меры при сборке образов

* использовать конкретные версии
* обновлять зависимости
* использовать минимальные образы
* удалять временные файлы
* использовать multi-stage build

---

## 21. Как хранить секреты в Docker

Методы:

* Docker secrets
* environment variables
* external vault (Hashicorp Vault)
* mounted files

Лучший способ:

Docker Secrets

---

## 22. Как запустить Docker в непривилегированном режиме

Методы:

### rootless mode

```bash
dockerd-rootless-setuptool.sh install
```

или

### запуск контейнера от пользователя

Dockerfile:

```dockerfile
RUN adduser -D appuser
USER appuser
```
